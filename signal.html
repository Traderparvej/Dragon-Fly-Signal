<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DragonFly AI Signal</title>
<style>
body {font-family: Arial, sans-serif;background:#000;color:#fff;text-align:center;margin:0;padding:20px;}
button {background:#4caf50;border:none;padding:10px 20px;margin:5px;color:white;cursor:pointer;border-radius:4px;}
select, input {padding:8px;border-radius:4px;border:none;margin:5px;}
.modal {display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);justify-content:center;align-items:center;z-index:10;}
.modal-content {background:#111;padding:20px;border-radius:8px;width:90%;max-width:400px;}
.candle {width:30px;height:100px;margin:20px auto;background:#4caf50;position:relative;animation:growUp 1s forwards;}
@keyframes growUp {from{height:0;}to{height:100px;}}
</style>
</head>
<body>

<h2>‚ö°Ô∏è DragonFly AI ‚ö°Ô∏è</h2>
<select id="marketSel" onchange="fillAssetSelect()">
  <option value="OTC">OTC</option>
  <option value="FOREX">FOREX</option>
  <option value="CRYPTO">CRYPTO</option>
</select>
<select id="assetSelect"></select>
<select id="timeframe">
  <option value="1m">1 Minute</option>
  <option value="2m">2 Minute</option>
  <option value="5m">5 Minute</option>
</select>
<select id="bollinger">
  <option value="upper">Upper</option>
  <option value="lower">Lower</option>
</select>
<br>
<button id="generateBtn">Generate Signal</button>
<button id="resetBtn">Reset</button>

<div id="signalModal" class="modal">
  <div class="modal-content">
    <h3>Generated Signal</h3>
    <div class="candle"><div class="body" id="candleBody"></div></div>
    <pre id="signalText" style="text-align:left;white-space:pre-wrap;"></pre>
    <button onclick="closeSignal()">Close</button>
  </div>
</div>

<div id="loadingModal" class="modal">
  <div class="modal-content"><h3>Generating Signal...</h3></div>
</div>

<script>
const assetSelect = document.getElementById('assetSelect');
const signalModal = document.getElementById('signalModal');
const signalText = document.getElementById('signalText');
const candleBody = document.getElementById('candleBody');
const loadingModal = document.getElementById('loadingModal');
const generateBtn = document.getElementById('generateBtn');
const resetBtn = document.getElementById('resetBtn');
const marketSel = document.getElementById('marketSel');
const timeframe = document.getElementById('timeframe');
const bollinger = document.getElementById('bollinger');

function pad2(n){return n<10?'0'+n:n;}

function fillAssetSelect() {
  const market = marketSel.value;
  assetSelect.innerHTML = '';

  let pairs = [];

  if(market === "OTC") {
    pairs = [
      "Microsoft (OTC)",
      "Intel (OTC)",
      "American Express (OTC)",
      "FACEBOOK INC (OTC)",
      "Pfizer Inc (OTC)",
      "USD/BDT (OTC)",
      "USD/EGP (OTC)",
      "USD/INR (OTC)",
      "NZD/USD (OTC)",
      "USD/PKR (OTC)",
      "USD/IDR (OTC)",
      "USD/PHP (OTC)",
      "NZD/CAD (OTC)",
      "USD/MXN (OTC)",
      "USD/NGN (OTC)"
    ];
  } else if (market === "FOREX") {
    pairs = ["EUR/USD","GBP/USD","USD/JPY","EUR/JPY","AUD/USD","USD/CAD"];
  } else if (market === "CRYPTO") {
    pairs = ["BTC/USD","ETH/USD","LTC/USD","BNB/USD"];
  }

  pairs.forEach(p => {
    const opt = document.createElement('option');
    opt.textContent = p;
    assetSelect.appendChild(opt);
  });
}

function showSignal() {
  const pair = assetSelect.value;
  const now = new Date();
  const gap = 1 + Math.floor(Math.random() * 3);
  now.setMinutes(now.getMinutes() + gap);
  const timeStr = pad2(now.getHours()) + ":" + pad2(now.getMinutes());

  const signalMessage = `‚ö°Ô∏è DragonFly AI ‚ö°Ô∏è

üíπ ${pair}
üïí ${timeStr}
üéØ Opposite Trade
üìã Check previous candle & follow risk management`;

  signalText.textContent = signalMessage;
  candleBody.style.background = '#4caf50';
  candleBody.style.animation = 'growUp 1s forwards';

  const existingShareBtn = document.getElementById("shareTelegramBtn");
  if (!existingShareBtn) {
    const shareBtn = document.createElement("button");
    shareBtn.id = "shareTelegramBtn";
    shareBtn.textContent = "üì§ Share to Telegram";
    shareBtn.style.marginTop = "8px";
    shareBtn.style.background = "#0088cc";
    shareBtn.style.color = "#fff";
    shareBtn.onclick = () => {
      const encodedText = encodeURIComponent(signalMessage);
      const tgUrl = `https://t.me/share/url?url=&text=${encodedText}`;
      window.open(tgUrl, "_blank");
    };
    signalText.insertAdjacentElement("afterend", shareBtn);
  }

  signalModal.style.display = 'flex';
}

function closeSignal() {
  signalModal.style.display = 'none';
}

generateBtn.addEventListener('click', () => {
  loadingModal.style.display = 'flex';
  setTimeout(() => {
    loadingModal.style.display = 'none';
    showSignal();
  }, 2000);
});

resetBtn.addEventListener('click', () => {
  marketSel.value = "OTC";
  timeframe.value = "1m";
  bollinger.value = "upper";
  fillAssetSelect();
});

fillAssetSelect();
</script>
</body>
</html>
