<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dragonfly AI Signal</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #0a0f1a;
    color: #fff;
    text-align: center;
    padding: 20px;
  }
  select, button {
    padding: 8px 12px;
    margin: 5px;
    border: none;
    border-radius: 5px;
  }
  button {
    background: #00c853;
    color: #fff;
    cursor: pointer;
  }
  button:disabled { background: #444; cursor: not-allowed; }
  pre { background:#111; padding:10px; border-radius:5px; }

  /* Modal */
  .modal-backdrop {
    position:fixed;
    top:0;left:0;right:0;bottom:0;
    background:rgba(0,0,0,0.8);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:1000;
  }
  .modal {
    background:#1c2230;
    padding:20px;
    border-radius:10px;
    width:90%;
    max-width:600px;
  }

  /* Candle */
  .candle {
    display:inline-flex;
    flex-direction:column;
    align-items:center;
    height:100px;
    justify-content:space-between;
  }
  .wick {
    width:4px;
    height:20px;
    background:#ccc;
  }
  .body {
    width:30px;
    height:0;
    background:green;
  }
  @keyframes growUp {
    from { height:0; }
    to { height:50px; }
  }
  @keyframes growDown {
    from { height:0; }
    to { height:50px; }
  }
</style>
</head>
<body>

<h1>üêâ Dragonfly AI Signal</h1>

<div>
  <label>Pair:</label>
  <select id="assetSelect">
    <option>EUR/USD</option>
    <option>GBP/USD</option>
    <option>USD/JPY</option>
    <option>BTC/USDT</option>
  </select>
</div>

<div>
  <label>Bollinger:</label>
  <select id="bollinger">
    <option value="upper">Upper Band</option>
    <option value="lower">Lower Band</option>
  </select>
</div>

<div>
  <label>Timeframe:</label>
  <select id="timeframe">
    <option value="1m">M1</option>
    <option value="5m">M5</option>
    <option value="15m">M15</option>
    <option value="1h">H1</option>
  </select>
</div>

<div>
  <button id="generateBtn">Generate Signal</button>
  <button id="resetBtn">Reset</button>
</div>

<pre id="output"></pre>

<!-- Modal -->
<div class="modal-backdrop" id="signalModal">
  <div class="modal">
    <div style="text-align:center;margin-bottom:15px;">
      <div class="candle">
        <div class="wick"></div>
        <div id="candleBody" class="body"></div>
        <div class="wick"></div>
      </div>
    </div>
    <pre id="signalText" style="white-space:pre-wrap;color:#fff;font-size:14px;line-height:1.6;"></pre>
    <button onclick="closeSignal()" style="margin-top:15px;width:100%;">Close</button>
  </div>
</div>

<script>
const output=document.getElementById('output');
const generateBtn=document.getElementById('generateBtn');
const resetBtn=document.getElementById('resetBtn');
const assetSelect=document.getElementById('assetSelect');
const bollinger=document.getElementById('bollinger');
const timeframe=document.getElementById('timeframe');

let licenseOk=true; // demo

function pad2(x){return x.toString().padStart(2,'0');}

function generateSignalText(){
  if(!licenseOk){ alert("License not active."); return ""; }

  const pair = assetSelect.value;
  const bb = bollinger.value;
  const direction = bb==='upper'?'Buy':'Sell';
  const analysis = bb==='upper'
    ? 'Price is touching the upper BB; short-term bullish momentum observed.'
    : 'Price is touching the lower BB; short-term bearish momentum observed.';

  const now = new Date();
  const gap = 2;
  const entry = new Date(now.getTime()+gap*60*1000);

  let tf = timeframe.value;
  let duration="1 Minute";
  if(tf==="5m") duration="5 Minutes";
  else if(tf==="15m") duration="15 Minutes";
  else if(tf==="1h") duration="1 Hour";

  const timeStr = `${pad2(entry.getHours())}:${pad2(entry.getMinutes())} (${gap} Minutes Later)`;

  return {
    text:`‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶ 
üêâ DRAGONFLY ‚Äî AI MARKET ANALYSIS
‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶

üìä Pair               : ${pair} 
‚è∞ Entry Time    : ${timeStr}
‚åõÔ∏è Signal Duration: ${duration}
üìà Strategy        : Bollinger Band ‚Äì ${bb.charAt(0).toUpperCase()+bb.slice(1)} Zone 
üéØ Direction       : ${direction}

üßæ Market Analysis
${analysis}

‚ö°Ô∏è Note: Execute the trade exactly after ${gap} minutes for optimal entry.
‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶`,
    type:direction
  };
}

function showSignalModal(text,type){
  document.getElementById('signalModal').style.display='flex';
  document.getElementById('signalText').textContent=text;

  const candle=document.getElementById('candleBody');
  candle.style.height="0"; // reset
  if(type==='Buy'){
    candle.style.background="limegreen";
    candle.style.animation="growUp 1.5s forwards";
  } else {
    candle.style.background="crimson";
    candle.style.animation="growDown 1.5s forwards";
  }
}
function closeSignal(){
  document.getElementById('signalModal').style.display='none';
}

generateBtn.addEventListener('click',()=>{
  if(!licenseOk){ alert("License not active."); return; }

  output.textContent="Analyzing market... ‚è≥";
  generateBtn.disabled=true; resetBtn.disabled=true;

  setTimeout(()=>{
    let sig=generateSignalText();
    output.textContent=sig.text;
    showSignalModal(sig.text,sig.type);
    generateBtn.disabled=false; resetBtn.disabled=false;
  },2000);
});

resetBtn.addEventListener('click',()=>{ output.textContent=""; });
</script>

</body>
</html>
