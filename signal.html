<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DragonFly â€” AI Real Time Signal</title>
<style>
/* --- CSS SAME AS YOU GAVE (UNCHANGED) --- */
:root{
  --bg:#081024;
  --panel:#0f1530;
  --muted:#9fb0d6;
  --text:#ffffff;
  --accent:#6dd6ff;
  --green:#4caf50;
}
*{box-sizing:border-box;}
body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#05102a,#081024);color:var(--text);}
.wrap{max-width:1100px;margin:18px auto;padding:18px;}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
header h1{margin:0;font-size:20px;display:flex;align-items:center;gap:12px;}
.card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.03));border:1px solid rgba(255,255,255,0.04);border-radius:12px;padding:14px;margin-bottom:12px;}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;}
label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px;}
select,button,input,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);font-weight:600;}
select,input,textarea{background:rgba(255,255,255,0.95);color:#000;font-weight:500;}
.controls{display:flex;gap:10px;margin-top:12px;}
.controls button{flex:1;background:var(--accent);color:#000;border:none;border-radius:10px;cursor:pointer;font-weight:700;}
.signal-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:1200;}
.signal-modal{background:#0f1530;padding:16px;border-radius:14px;width:92%;max-width:380px;}
.signal-text{white-space:pre-wrap;font-family:monospace;}
.analysis-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:none;align-items:center;justify-content:center;z-index:1400;flex-direction:column;}
</style>
</head>

<body>
<div class="wrap">
<header>
<h1>ğŸ‰ DragonFly â€” AI Real Time Signal</h1>
<div>
<span id="licenseStatus">License Inactive âŒ</span>
<div id="deviceIdDiv"></div>
</div>
</header>

<!-- UI PART SAME -->

<script>
// ==== ONLY SIGNAL GAP UPDATED ====

// ==== Generate Signals ====
function showSignal(){
  const selectedAssets=[...assetContainer.querySelectorAll('input:checked')].map(c=>c.value);
  if(selectedAssets.length===0){ alert("Select at least one asset."); return; }
  const numSignals=parseInt(document.getElementById('numSignals').value)||1;
  const mode=signalModeSel.value;
  const now=new Date();
  let msg="ğŸš€ ğ——ğ—¿ğ—®ğ—´ğ—¼ğ—»ğ—™ğ—¹ğ˜† ğ—”ğ—œ Future ğ—¦ğ—¶ğ—´ğ—»ğ—®ğ—¹\nâœ”ï¸1-Step MTG | â° UTC +06:00\n\n";
  let signalSides=[];
  if(mode==="BOTH") signalSides=generateBalancedBothSignals(numSignals);

  for(let i=0;i<numSignals;i++){
    const asset=selectedAssets[i%selectedAssets.length];

    // âœ… FINAL CHANGE: 4â€“8 MIN RANDOM GAP
    let gap = Math.floor(Math.random() * 5) + 4;

    now.setMinutes(now.getMinutes()+gap);

    const timeStr=pad2(now.getHours())+":"+pad2(now.getMinutes());
    const monoTime=toMono(timeStr);
    const monoAsset=toMono(asset.toUpperCase());

    let sideLabel="";
    if(mode==="CALL") sideLabel="CALL";
    else if(mode==="PUT") sideLabel="PUT";
    else if(mode==="BOTH") sideLabel=signalSides[i];

    if(mode==="OPPOSITE"){
      msg+=`ğ™¼ğŸ· ${monoTime} ${monoAsset}\n`;
    } else {
      msg+=`ğ™¼ğŸ· ${monoTime} ${monoAsset} ${toMono(sideLabel)}\n`;
    }
  }

  signalText.textContent=msg;
  signalModal.style.display='flex';
}
</script>
</body>
</html>
